<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</title>
    <style> 
        /* BASE & LAYOUT: ‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö Home Dashboard */
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            padding: 0; 
            background-color: #F8F8FC; 
            color: #343A40; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container { 
            background-color: #fff; 
            padding: 30px; 
            border-radius: 12px; 
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); 
            max-width: 550px; 
            width: 90%;
        }
        h2 { color: #3A86FF; border-bottom: 1px solid #E9ECEF; padding-bottom: 10px; margin-bottom: 25px; font-weight: 600; }
        
        /* Input/Select/Button Styling */
        input[type="number"], input[type="file"], select { width: 100%; padding: 12px 15px; margin-bottom: 15px; border-radius: 6px; border: 1px solid #CED4DA; box-sizing: border-box; font-size: 1em; }
        button { width: 100%; padding: 12px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: background-color 0.2s; }
        
        /* Color Palettes */
        .btn-success { background-color: #64C783; color: white; } /* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß */
        .btn-secondary { background-color: #A29BFE; color: white; } /* ‡∏°‡πà‡∏ß‡∏á‡∏≠‡πà‡∏≠‡∏ô */
        .btn-success:hover { background-color: #55B573; }
        
        /* Debt Alert Styling */
        .debt-alert-danger { background-color: #FFEBEE; border: 1px solid #FF6666; color: #DC3545; padding: 15px; border-radius: 6px; margin-bottom: 25px; font-weight: 600; }
        .debt-alert-success { background-color: #D4EDDA; border: 1px solid #64C783; color: #155724; padding: 15px; border-radius: 6px; margin-bottom: 25px; font-weight: 600; }
        .input-highlight { background-color: #FFFDE7; border-color: #FFC107; } /* ‡πÄ‡∏ô‡πâ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏™‡πà‡πÄ‡∏á‡∏¥‡∏ô */

        /* Responsive Adjustments */
        @media (max-width: 600px) {
            .container {
                width: 95%; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô */
                margin: 20px auto;
                padding: 20px;
            }
            h2 {
                font-size: 1.5em;
            }
            /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å (Secondary) ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô */
            .btn-secondary {
                margin-top: 20px; 
            }
        }
    </style>
</head>
<body>
<div class="container">
    <h2>üíµ ‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡∏´‡πâ‡∏≠‡∏á</h2>
    <p style="font-size: 0.9em; color: #6C757D;">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ‡∏Ñ‡∏∏‡∏ì <strong>{{ user.name }}</strong></p>

    {% if total_due > 0 %}
        <div class="debt-alert-danger">
            <strong>üö® ‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡∏£‡∏ß‡∏°: {{ total_due }} ‡∏ö‡∏≤‡∏ó</strong> 
            (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏ó‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢ {{ total_due }} ‡∏ö‡∏≤‡∏ó)
        </div>
    {% else %}
        <div class="debt-alert-success">
            ‚úÖ **‡∏ó‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πâ‡∏≤‡∏á‡∏ä‡∏≥‡∏£‡∏∞** (‡∏ä‡∏≥‡∏£‡∏∞ 50 ‡∏ö‡∏≤‡∏ó ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡πà‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)
        </div>
    {% endif %}


    {% if error %}
        <p style="color: red; padding: 10px; border: 1px solid red; border-radius: 4px; margin-bottom: 15px;">{{ error }}</p>
    {% endif %}

    <form method="POST" action="{{ url_for('upload') }}" enctype="multipart/form-data">
        
        <label for="amount-paid-input" style="font-weight: bold;">1. ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó):</label>
        <input type="number" id="amount-paid-input" name="amount_paid" 
               placeholder="‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥ 50 ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏° {{ total_due }}" 
               required min="50" class="input-highlight">
        <p style="font-size: 0.85em; color: #6C757D; margin-top: -10px;">* ‡∏´‡∏≤‡∏Å‡∏à‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 50 ‡∏ö‡∏≤‡∏ó ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏¢‡∏≠‡∏î‡∏Ñ‡πâ‡∏≤‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Å‡πà‡∏≠‡∏ô</p>


        <label for="pay-month-select" style="font-weight: bold;">2. ‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡πà‡∏≤‡∏¢:</label>
        <select id="pay-month-select" name="payment_month_id" required>
            {% for m in available_months %}
                <option value="{{ m.id }}">
                    {{ m.name }}
                </option>
            {% endfor %}
        </select>

        <label for="slip-file" style="font-weight: bold;">3. ‡πÅ‡∏ô‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏™‡∏•‡∏¥‡∏õ (‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û/PDF):</label>
        <input type="file" id="slip-file" name="slip_file" accept="image/*, application/pdf" required>
        
        <button type="submit" class="btn-success" style="margin-top: 20px;">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞</button>
    </form>
    
    <a href="{{ url_for('home') }}"><button class="btn-secondary" style="margin-top: 10px;">‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button></a>
</div>
</body>
</html>
